<html>
  <head>
    <title>kalshagar - Finger Password Keyboard</title>
    <link rel="stylesheet" href="static/style.css" type="text/css" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  </head>
  <body>
    <div class="wiki" id="content_view" style="display: block;">
<span style="background-color: #ffb500;
text-align: center;
display: block;
font-weight:bold;">Software: <a class="wiki_link" href="USB%20without%20Arduino.html">USB without Arduino</a><br />
Hardware: <a class="wiki_link" href="RapideUSB.html">RapideUSB</a> </span><br />
<iframe width="420" height="315" src="//www.youtube.com/embed/6xjCfsJKhSA" frameborder="0" allowfullscreen></iframe><br />
<h1 id="toc0"><a name="Diagrams"></a> Diagrams </h1>
<h2 id="toc1"><a name="Diagrams-Process diagram"></a> Process diagram </h2>
<img src="files/Finger%20Password%20Keyboard.png" alt="Finger Password Keyboard.png" title="Finger Password Keyboard.png" /><img src="files/LINEcamera_share_2015-08-17-23-51-27.jpg" alt="LINEcamera_share_2015-08-17-23-51-27.jpg" title="LINEcamera_share_2015-08-17-23-51-27.jpg" style="width: 300px;" align="right" /><br />
<h2 id="toc2"><a name="Diagrams-Block diagram"></a> Block diagram </h2>
<img src="files/Finger%20Password%20Keyboard%20-%20block.png" alt="Finger Password Keyboard - block.png" title="Finger Password Keyboard - block.png" /><br />
<h2 id="toc3"><a name="Diagrams-Schematics"></a> Schematics </h2>
<img src="files/fpk.png" alt="fpk.png" title="fpk.png" /><br />
<em>Forgive the crudity, I put just the essential components but you have all the base here: an ATmega8a, the USB connection, Level converter, Finger print scanner and a handful of switches.</em><br />
<h1 id="toc4"><a name="Creation"></a> Creation </h1>
<h2 id="toc5"><a name="Creation-Bill Of Materials"></a> Bill Of Materials </h2>
<em>Reminder: basically all the USB part is a <a class="wiki_link" href="RapideUSB.html">RapideUSB</a> board, and all the other components are soldered on that same board (on the free space zone). For the detailed BOM of the <a class="wiki_link" href="RapideUSB.html">RapideUSB</a> go to its page.</em><br />
<ul><li>Fingerprint scanner GT-511C1<ul><li>My old version no more sold and poorly documented <a class="wiki_link_ext" href="https://www.sparkfun.com/products/retired/11836" rel="nofollow">https://www.sparkfun.com/products/retired/11836</a></li><li>In case, the latest version <a class="wiki_link_ext" href="https://www.sparkfun.com/products/13007" rel="nofollow">https://www.sparkfun.com/products/13007</a></li><li>Code sample <a class="wiki_link_ext" href="https://github.com/mlaws/GT-511C1_Mega" rel="nofollow">https://github.com/mlaws/GT-511C1_Mega</a></li><li>Doc <A  href="files/GT-511C1.pdf.html">GT-511C1.pdf</a></li></ul></li><li>Micro controller : <a class="wiki_link" href="ATmega8a.html">ATmega8a</a>, form factor and mostly identical to <a class="wiki_link" href="ATmega328.html">ATmega328</a> but cheaper and with less memory but still plenty more than enough</li><li>Level conversion between main circuit (MCU, USB, leds,...) @5v and the Fingerprint scanner (3.3v) : eBay cheapo 1USD level converter<ul><li>Note: this fingerprint scanner bast*rd is 5v tolerant for the power pins but serial comm <strong>must</strong> be at 3.3v, so I put the whole module on 3.3v</li></ul></li><li>3.3v made with a LM317<ul><li>R1=240 and R2=400</li></ul></li><li>Buttons</li><li>USB connector</li><li>Vibrator module for haptic feedback when scan fails</li><li>Leds, cables, board, caps, resistors, ...</li></ul><br />
<h1 id="toc6"><a name="Code"></a> Code </h1>
On the git repository : <a class="wiki_link_ext" href="https://github.com/AlanFromJapan/alanarduinotools/tree/master/Atmegaxx8/FingerPasswordKeyboard" rel="nofollow">https://github.com/AlanFromJapan/alanarduinotools/tree/master/Atmegaxx8/FingerPasswordKeyboard</a><br />
<br />
<h2 id="toc7"><a name="Code-Points of interrest"></a> Points of interrest</h2>
<h3 id="toc8"><a name="Code-Points of interrest-Keyboard mapping"></a>Keyboard mapping</h3>
I live in Japan and have a Japanese keyboard on my pc, means that the keys are mapped differently, and it's the software job to adapt and send the right code to the PC. Therefore in the <em>keyboard.h</em> file you can select which mode you work in to correctly map keys and codes sent to PC. Japan is the one I use, US should be ok provided you check a little.<br />
Default keyboard mapping: <a class="wiki_link_ext" href="http://www.usb.org/developers/hidpage#HID_Usage" rel="nofollow">http://www.usb.org/developers/hidpage#HID_Usage</a> or <a class="wiki_link_ext" href="http://www.usb.org/developers/hidpage/Hut1_12v2.pdf" rel="nofollow" target="_blank">direct link to PDF</a>.<br />
About that mapping problem for Japanese keyboard, the invaluable explanation detailed is here <a class="wiki_link_ext" href="http://web.stanford.edu/class/cs140/projects/pintos/specs/kbd/scancodes-7.html" rel="nofollow">http://web.stanford.edu/class/cs140/projects/pintos/specs/kbd/scancodes-7.html</a><br />
<br />
<h1 id="toc9"><a name="Pictures"></a> Pictures </h1>
<img src="files/2015-08-29-23-12-40_photo.jpg" alt="2015-08-29-23-12-40_photo.jpg" title="2015-08-29-23-12-40_photo.jpg" /><img src="files/2015-08-29-23-12-20_photo.jpg" alt="2015-08-29-23-12-20_photo.jpg" title="2015-08-29-23-12-20_photo.jpg" /><br />
<img src="files/2015-08-24-23-26-11_photo.jpg" alt="2015-08-24-23-26-11_photo.jpg" title="2015-08-24-23-26-11_photo.jpg" /><br />
<em>If you wonder top wood is Pao Santo and sides are Magnolia, finish is shellac and yes I had some splinters while working the Pao Santo</em><br />
<br />
<h1 id="toc10"><a name="Links"></a> Links </h1>
<h2 id="toc11"><a name="Links-USB keyboard on the cheap"></a> USB keyboard on the cheap</h2>
<ul><li>Sample <a class="wiki_link_ext" href="https://hackaday.io/project/1265-unhappy-hacking-keyboard" rel="nofollow">https://hackaday.io/project/1265-unhappy-hacking-keyboard</a></li><li>v-usb <a class="wiki_link_ext" href="http://www.obdev.at/products/vusb/hidkeys.html" rel="nofollow">http://www.obdev.at/products/vusb/hidkeys.html</a></li></ul>
    </div>
  </body>
</html>