<html>
  <head>
    <title>kalshagar - Home Presence Detector</title>
    <link rel="stylesheet" href="static/style.css" type="text/css" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  </head>
  <body>
    <div class="wiki" id="content_view" style="display: block;">
Upon detection of a movement nearby, turn on the light ... yes, my living room is dark and messy.<br />
Not complicated project at all, however special care must be payed since we'll be playing with the big boys and the AC wall power. If careless, at least magical smoke, at worse a fire or frying your myocard.<br />
<strong>20101130:</strong> well, the 2 babies I made months ago (10 months ago for the 1st version) are still perfectly working with not a single issue. Mine is still in the entrance of my appartment turning on light when I walk in, and the other one at my gf appartment turning on the light when she goes to the bathroom. Quite happy to see there are some projects I can build and have it run for months.<img src="files/heart.gif" alt="heart.gif" title="heart.gif" /><br />
<strong>20111101:</strong> for the record, the version 1 made in January 2010 (soon 2 years ago) is still running just fine in my entrance. I'm quite proud yes. 2 years of electronics later, I notice that yeah, the diode before the SSR could be spared, but it would have been safer to add a resistor or better, to have a transistor drive the SSR (extensively used in <a class="wiki_link" href="Clapclap%202313.html">Clapclap 2313</a>). Anyway, still working so colclusion the baby has internal resistance and does not require much more than 20mA otherwise the uC would have fried long ago... lucky me!<br />
<br />
<h2 id="toc0"><a name="x-Components"></a> Components </h2>
<ul><li>Movement detector <a class="wiki_link_ext" href="https://akizukidenshi.com/catalog/g/gM-02471/" rel="nofollow">https://akizukidenshi.com/catalog/g/gM-02471/</a> (850 jpy)</li><li>Relay that can drive a few Amps  <a class="wiki_link_ext" href="http://akizukidenshi.com/catalog/g/gI-03236/" rel="nofollow">http://akizukidenshi.com/catalog/g/gI-03236/</a> (250 jpy)<ul><li>Here a 240v 2A -&gt; means in Japan with the 110v I can drive a 200 W light. My purpose is a 40~60 W tungstene or 10~15 W light saving light, so I'm comfortable.</li></ul></li><li>A microcontroller since I'm a lazy boy and lame at electronics (ATTiny 2313) (150 jpy)</li><li>A wallwart to deliver the 9v since I can't find a simple transformer 110v-9v (750 jpy)</li><li>2 different voltage rails : 5V for the UC, 9V for the movement detector</li><li>Boxing, alive led, plugs for japan wall, ...</li></ul><br />
Total : around 3,000 jpy. Work time : 10 days. Time to build a new one : about 1 day with the casing I would say.<br />
<br />
<h2 id="toc1"><a name="x-Code"></a> Code </h2>
Free of use, version of 10 feb 2010. Working fine. Only concern is a small noise, like a whistle, that is generated by the low-cost wallwart. Hopefully I can't hear it from the living room, but if you stand close to the box you can't miss it. Hard to find nice and inexpensive wallwart.<br />
<A  href="files/HPD.c.html">HPD.c</a><br />
<br />
<h2 id="toc2"><a name="x-PIR Sensor - Passive Infra Red sensor"></a> PIR Sensor - Passive Infra Red sensor </h2>
Very easy to use and surprising efficient. One can find it at Sparkfun or Akizukidenshi, and for once at nearly the same price 10 $ / 800 JPY (bought mine at Akizukidenshi).<br />
On detection of a movement, the ALARM pin goes low (after a 1-2 sec of initial configuration). Since the pin goes DOWN, one must pull it UP to make sure to have appropriate reading. And by the way, beware of your pull up: make it 5v and not 9v to not fry the uC.<br />
Another thing to remember is that even if it says &quot;works from 5v to 12v&quot;, it seems that the device works better in the 9-12 v range (according peoples comment here and there). So the circuit will have a 9v rail (wallwart direct) and a 5v (LM7805 managed).<br />
According documentation don't forget a 10 uF condensator right near the sensor, seems it likes to make waves.<br />
Wiring colors (according my cable delivered with the baby so read your own doc if you're unsure):<br />
<ul><li>RED : Vcc (9v in my case)</li><li>BROWN : Ground</li><li>BLACK : ALARM (LOW on activity)</li></ul><br />
<img src="files/PIR_Sensor_wiring.png" alt="PIR_Sensor_wiring.png" title="PIR_Sensor_wiring.png" /> <strong>NOTABENE</strong> : put the pull up to the 9v or the 5v depends on your needs ! In my case it will be 5v.<br />
<br />
<h2 id="toc3"><a name="x-SSR - Solid State Relay"></a> SSR - Solid State Relay </h2>
Trigger is 3-8v and drives 240v/2A. Since I'm in Japan, power here is 110v, but let's not assume I can ride until 4A ... I don't mean to burn my appartment to the ground. I'm wandering if I should protect the relay pins (uC side) and use a optocoupler or connect it directly... Answer might cost me a uC so maybe use the &quot;better safe than sorry&quot; approach is better.<br />
<br />
<h2 id="toc4"><a name="x-Schema"></a> Schema </h2>
<img src="files/HPD.png" alt="HPD.png" title="HPD.png" /><br />
<br />
<h2 id="toc5"><a name="x-Pictures"></a> Pictures </h2>
More pictures at the bottom of the page...<br />
<br />


<table class="wiki_table">
    <tr>
        <td><img src="files/19570_296660938789_704343789_3458604_7102016_n.jpg" alt="19570_296660938789_704343789_3458604_7102016_n.jpg" title="19570_296660938789_704343789_3458604_7102016_n.jpg" /><br />
</td>
        <td><img src="files/19570_296661588789_704343789_3458606_612512_n.jpg" alt="19570_296661588789_704343789_3458606_612512_n.jpg" title="19570_296661588789_704343789_3458606_612512_n.jpg" /> <br />
Left to right : 9v wallwart, 0.5 A fuse, PCB, PIR, activity leds<br />
</td>
    </tr>
    <tr>
        <td><img src="files/HPD_picture.jpg" alt="HPD_picture.jpg" title="HPD_picture.jpg" /><br />
</td>
        <td><br />
</td>
    </tr>
</table>

<br />
<h2 id="toc6"><a name="x-Documents and related links"></a> Documents and related links </h2>
<ul><li><a class="wiki_link_ext" href="http://kennethfinnegan.blogspot.com/2010/01/switching-120vac-with-5v-digital-logic.html" rel="nofollow">http://kennethfinnegan.blogspot.com/2010/01/switching-120vac-with-5v-digital-logic.html</a></li><li><a class="wiki_link_ext" href="http://www.allaboutcircuits.com/vol_4/chpt_5/5.html" rel="nofollow">http://www.allaboutcircuits.com/vol_4/chpt_5/5.html</a></li><li><a class="wiki_link_ext" href="http://www.sparkfun.com/commerce/tutorial_info.php?tutorials_id=119" rel="nofollow">http://www.sparkfun.com/commerce/tutorial_info.php?tutorials_id=119</a></li><li>Arduino and relay <a class="wiki_link_ext" href="http://www.synbio.org.uk/component/content/article/46-instrumentation-news/1240-connecting-a-relay-to-arduino.html?directory=257" rel="nofollow">http://www.synbio.org.uk/component/content/article/46-instrumentation-news/1240-connecting-a-relay-to-arduino.html?directory=257</a></li></ul><br />
<h2 id="toc7"><a name="x-Pictures (continued)"></a> Pictures (continued) </h2>


<table class="wiki_table">
    <tr>
        <td><img src="files/31562_386889753789_704343789_4002484_3545818_n.jpg" alt="31562_386889753789_704343789_4002484_3545818_n.jpg" title="31562_386889753789_704343789_4002484_3545818_n.jpg" /><br />
New version smaller at the top, first version at the bottom.<br />
</td>
        <td><br />
</td>
    </tr>
    <tr>
        <td><img src="files/IMG_3724.jpg" alt="IMG_3724.jpg" title="IMG_3724.jpg" /><br />
</td>
        <td><img src="files/IMG_3725.jpg" alt="IMG_3725.jpg" title="IMG_3725.jpg" /><br />
</td>
    </tr>
    <tr>
        <td><img src="files/IMG_3726.jpg" alt="IMG_3726.jpg" title="IMG_3726.jpg" /><br />
</td>
        <td><img src="files/IMG_3727.jpg" alt="IMG_3727.jpg" title="IMG_3727.jpg" /><br />
</td>
    </tr>
</table>


    </div>
  </body>
</html>